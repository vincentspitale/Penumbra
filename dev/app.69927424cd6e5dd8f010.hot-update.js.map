{"version":3,"file":"app.69927424cd6e5dd8f010.hot-update.js","sources":["/Users/vincentspitale/Developer/Web/dark-learning/src/components/toggle/toggle.js"],"sourcesContent":["/*global chrome*/\n\nimport React, {Component} from \"react\"\nimport './toggle.css'\n\nfunction insertCode(tabId, isDark) {   \n    chrome.tabs.insertCSS(tabId, {\n        code: isDark ? \"video, embed {  -webkit-filter: invert(100%) hue-rotate(180deg); } \" : \"video, embed {  -webkit-filter: none; } \",\n        allFrames: true,\n        runAt: \"document_start\"\n    });\n}\n\nchrome.tabs.onUpdated.addListener(function(tabId, info) {\n    //  if (info.status && info.status == \"complete\")\n            insertCode(tabId, localStorage.isDark);\n    //  else if (info.url && info.url.slice(0,4) == \"http\") \n    //      insertCSS(tabId);\n    });\n\n\n\nfunction updateTabs(isDark) {\n    chrome.tabs.query({}, function (tabs) {\n        for (var i=0; i<tabs.length; ++i) {\n            var tab = tabs[i];\n            if (tab.url && tab.url.slice(0,4) == \"http\")\n                insertCode(tab.id, isDark);\n        }\n    })\n}\n\nclass Toggle extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            isDark: localStorage.getItem(\"isDark\"),\n        }\n\n    }\n    \n\n    toggle() {\n        this.setState({isDark: !this.state.isDark})\n        localStorage.setItem(\"isDark\", this.state.isDark)\n    }\n\n    render() { \n        updateTabs(this.state.isDark)\n        return <button className={this.state.isDark ? \"toggler toggled\" : \"toggler\"} onClick={() => this.toggle()}>{this.state.isDark ? \"Disable Invert\" : \"Enable Invert\"}</button>\n    }\n\n    \n\n}\n\nexport default Toggle"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAIA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AApBA;AACA;AAwBA;;;;A","sourceRoot":""}